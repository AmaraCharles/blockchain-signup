!function(){let e,t,n,i,r;function s(e){return e&&e.__esModule?e.default:e}var o,a,c,h,u,l={};function d(){return"local"===l.sardineEnv}function f(e){let t;try{t||=localStorage.getItem("sardine_log_level_override")}catch(e){return!1}return!!t&&("debug"===t||"warn"===t&&e in["warn","error"]||"error"===t&&"error"===e)}l=JSON.parse('{"version":"2023-11-16-5539dfb","hash":"5539dfb","sardineEnv":"production"}');class p{constructor(e){this.name=e}debug(e,...t){(d()||f("debug"))&&console.log(`[${this.name}] ${e} ${t} ${Date.now()}`)}warn(e,...t){(d()||f("warn"))&&console.warn(`${this.name} ${e} ${t}`)}error(e,...t){(d()||f("error"))&&console.error(`${this.name} ${e} ${t}`)}}function g(e){return new p(e)}let m=g("error-reporter"),y={url:"https://browser.sentry-cdn.com/6.2.0/bundle.min.js",integrity:"sha384-PWBASVWyeEeNsEw6zDTEwryGvuiH1xuxnlu/n+GOI777vnfbqyYLzqCf+najQLoi"},v=!0,w=[];function b(e){try{e()}catch(e){E(e)}}function E(t,n){if("development"===l.sardineEnv||"test"===l.sardineEnv){console.error(t);return}if(m.error("reporting error:",t.name,t.message,t.stack,t),!window.Sentry){w.push({err:t,data:n}),function(){if(!v)return;let t=document.createElement("script");t.onload=function(){e=S(),w.forEach(t=>e.captureException(t.err,{data:t.data}))},t.src=y.url,t.integrity=y.integrity,t.setAttribute("crossorigin","anonymous"),document.getElementsByTagName("head")[0]?.appendChild(t),v=!1}();return}e||(e=S()),e.captureException(t,{data:n})}function S(){return new window.Sentry.BrowserClient({dsn:t,release:l.version,environment:l.sardineEnv,integrations:n?window.Sentry.defaultIntegrations:window.Sentry.defaultIntegrations.filter(e=>!["GlobalHandlers","TryCatch"].includes(e.name))})}var M=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function u(e,n,i,s){var o,a,c=Object.create((n&&n.prototype instanceof m?n:m).prototype);return r(c,"_invoke",{value:(o=new x(s||[]),a=d,function(n,r){if(a===f)throw Error("Generator is already running");if(a===p){if("throw"===n)throw r;return I()}for(o.method=n,o.arg=r;;){var s=o.delegate;if(s){var c=function e(n,i){var r=i.method,s=n.iterator[r];if(s===t)return i.delegate=null,"throw"===r&&n.iterator.return&&(i.method="return",i.arg=t,e(n,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=TypeError("The iterator does not provide a '"+r+"' method")),g;var o=l(s,n.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,g;var a=o.arg;return a?a.done?(i[n.resultName]=a.value,i.next=n.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,g):a:(i.method="throw",i.arg=TypeError("iterator result is not an object"),i.delegate=null,g)}(s,o);if(c){if(c===g)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===d)throw a=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=f;var h=l(e,i,o);if("normal"===h.type){if(a=o.done?p:"suspendedYield",h.arg===g)continue;return{value:h.arg,done:o.done}}"throw"===h.type&&(a=p,o.method="throw",o.arg=h.arg)}})}),c}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",f="executing",p="completed",g={};function m(){}function y(){}function v(){}var w={};h(w,o,function(){return this});var b=Object.getPrototypeOf,E=b&&b(b(O([])));E&&E!==n&&i.call(E,o)&&(w=E);var S=v.prototype=m.prototype=Object.create(w);function M(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function L(e,t){var n;r(this,"_invoke",{value:function(r,s){function o(){return new t(function(n,o){!function n(r,s,o,a){var c=l(e[r],e,s);if("throw"===c.type)a(c.arg);else{var h=c.arg,u=h.value;return u&&"object"==typeof u&&i.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,o,a)},function(e){n("throw",e,o,a)}):t.resolve(u).then(function(e){h.value=e,o(h)},function(e){return n("throw",e,o,a)})}}(r,s,n,o)})}return n=n?n.then(o,o):o()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:I}}function I(){return{value:t,done:!0}}return y.prototype=v,r(S,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:y,configurable:!0}),y.displayName=h(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,h(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},M(L.prototype),h(L.prototype,a,function(){return this}),e.AsyncIterator=L,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var o=new L(u(t,n,i,r),s);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},M(S),h(S,c,"Generator"),h(S,o,function(){return this}),h(S,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return a.type="throw",a.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),h=i.call(o,"finallyLoc");if(c&&h){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else if(h){if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return(o.type=e,o.arg=t,s)?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;T(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:O(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),g}},e}({});try{regeneratorRuntime=M}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=M:Function("r","regeneratorRuntime = r")(M)}for(var L=new Uint8Array(16),k=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,T=[],x=0;x<256;++x)T.push((x+256).toString(16).substr(1));var O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(T[e[t+0]]+T[e[t+1]]+T[e[t+2]]+T[e[t+3]]+"-"+T[e[t+4]]+T[e[t+5]]+"-"+T[e[t+6]]+T[e[t+7]]+"-"+T[e[t+8]]+T[e[t+9]]+"-"+T[e[t+10]]+T[e[t+11]]+T[e[t+12]]+T[e[t+13]]+T[e[t+14]]+T[e[t+15]]).toLowerCase();if(!("string"==typeof n&&k.test(n)))throw TypeError("Stringified UUID is invalid");return n},I=function(e,t,n){var i=(e=e||{}).random||(e.rng||function(){if(!c&&!(c="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(L)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return O(i)};function C(e){return e.getAttribute("data-sardine-id")||e.getAttribute("name")||e.id||e.getAttribute("placeholder")||function(e){let t=(e.getAttribute("type")||"").toLowerCase();if(["email","password","tel"].includes(t))return t}(e)||""}class F{constructor(e){this.iframe=e,document.addEventListener("input",this,!0)}handleEvent(e){b(()=>this.check(e))}check(e){"insertReplacementText"!==e.inputType&&"data"in e||this.sendMessage(e)}sendMessage(e){let t=e.target;null!=this.iframe.contentWindow&&this.iframe.contentWindow.postMessage(JSON.stringify([["TAUTOFILL",[Date.now(),C(t),t.value?.length||0].join(",")]]),"*")}}let _=[],N=e=>{if(_.push(e),void 0!==r||"undefined"==typeof MutationObserver)return;i=document.location.href,r=new MutationObserver(e=>{e.forEach(()=>{i!==document.location.href&&(i=document.location.href,_.forEach(e=>e()))})});let t={childList:!0,subtree:!0},n=document.getElementsByTagName("body");for(let e=0;e<n.length;e++)r.observe(n[e],t)};class j{constructor(e){this.iLastTime=0,this.output=[],this.tempKey=[],this.blurElements=[],this.containsShortcuts=!1,this.functionKeyMap={Backspace:"Backspace",Delete:"Delete",Insert:"Insert",Help:"Help",Home:"Home",End:"End",PageUp:"PageUp",PageDown:"PageDown",Tab:"Tab"},this.keyMap={...this.functionKeyMap},this.numberKeys=0,this.iframe=e,this.output=[],document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),N(()=>this.sendMessage)}check(e){if(!(e.target instanceof Element))return;let t=e.type[3],n=C(e.target);if(this.tempKey.includes(e.key)&&"u"===t){this.tempKey.splice(this.tempKey.indexOf(e.key),1);return}if("Shift"==e.key||"Control"==e.key||"Alt"==e.key||"Meta"==e.key||(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)&&"u"===t)return;let i=Date.now();this.blurElements.includes(e.target)||(e.target.addEventListener("blur",this,!0),this.blurElements.push(e.target)),0==this.output.length&&(this.iLastTime=i,this.containsShortcuts=!1,this.numberKeys=0,this.output=[String(i)]);let r=i-this.iLastTime;if(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey){let t=this.ShortcutsHandler(e);this.output.push([String(r),t,n].join(",")),this.containsShortcuts=!0,this.tempKey.push(e.key),this.sendMessage(e)}else{let i=this.nonShortcutsHandler(e,t);this.output.push([String(r),t,i,n].join(","))}this.output.length>=15&&this.sendMessage(e),this.iLastTime=i}sendMessage(e){if((this.output.length>=7||this.containsShortcuts)&&null!==e.target&&null!=this.iframe.contentWindow){let e=this.output.join("|");""!=e&&this.iframe.contentWindow.postMessage(JSON.stringify([["TKEYV2",e]]),"*"),this.output=[]}if(e.target&&"blur"==e.type){e.target.removeEventListener("blur",this,!0);let t=this.blurElements.indexOf(e.target);t>-1&&this.blurElements.splice(t,1)}}handleEvent(e){"keydown"==e.type||"keyup"==e.type?b(()=>this.check(e)):"blur"==e.type&&b(()=>this.sendMessage(e))}ShortcutsHandler(e){let t=[];if(e.altKey&&t.push("Alt"),e.ctrlKey&&t.push("Control"),e.metaKey&&t.push("Meta"),e.shiftKey&&t.push("Shift"),t.includes("Shift")&&1==t.length)t.push("");else{var n;t.push("|"===(n=e.key)?"BAR":"+"===n?"PLUS":n)}return t.join("+")}nonShortcutsHandler(e,t){let n;return e.key in this.keyMap&&"Enter"!=e.key?e.key in this.functionKeyMap?(this.containsShortcuts=!0,n=this.keyMap[e.key]):"u"===t?(n=this.keyMap[e.key],delete this.keyMap[e.key]):n=this.keyMap[e.key]:"Enter"==e.key?(this.containsShortcuts=!0,this.keyMap[e.key]=e.code,n=e.code):(this.keyMap[e.key]=this.numberKeys,n=this.numberKeys,this.numberKeys++),n}}class D{constructor(e){this.numberOfTouch=0,this.outputTouch=[],this.iLastTime=0,this.maxMoves=0,this.postMessageFn=e,document.addEventListener("touchstart",this,!0),document.addEventListener("touchend",this,!0),document.addEventListener("touchcancel",this,!0),document.addEventListener("touchmove",this,!0),N(()=>this.sendMessage)}check(e){let t;let{changedTouches:n,type:i}=e;switch(i){case"touchstart":this.numberOfTouch+=n.length;break;case"touchend":case"touchcancel":this.numberOfTouch-=n.length;break;case"touchmove":if(this.maxMoves>=200)return;this.maxMoves+=1}let r=[],s=Date.now();this.iLastTime||(this.iLastTime=s,this.outputTouch=[String(s)]),t=0+(s-this.iLastTime),r.push({touchstart:"s",touchmove:"m",touchend:"e",touchcancel:"c"}[i],String(t));for(let t=0;t<e.changedTouches.length;t++){let n=e.changedTouches[t];r.push([String(n.identifier),String(n.screenX.toFixed(2)),String(n.screenY.toFixed(2)),String(n.force)].join(","))}this.outputTouch.push(r.join(";")),this.iLastTime=s,0===this.numberOfTouch&&this.sendMessage()}sendMessage(){this.outputTouch.length>0&&(this.postMessageFn("TTOUCH",this.outputTouch.join("|")),this.outputTouch=[],this.iLastTime=0,this.maxMoves=0)}handleEvent(e){b(()=>this.check(e))}}class K{constructor(e){this.outputClipboard=[],this.postMessageFn=e,document.addEventListener("paste",this,!0),document.addEventListener("copy",this,!0),document.addEventListener("cut",this,!0)}handleEvent(e){b(()=>this.check(e))}check(e){let{clipboardData:t,type:n,target:i}=e;if(i instanceof Element&&null!==t){if(this.outputClipboard=[{paste:"p",copy:"cp",cut:"mv"}[n],String(Date.now()),C(i)],"paste"==n)this.outputClipboard.push(String(t.getData("text/plain").length));else{let e=window.getSelection();null!==e&&this.outputClipboard.push(String(e.toString().length))}this.sendMessage(e)}}sendMessage(e){this.postMessageFn("TCLIP",this.outputClipboard.join("|")),this.outputClipboard=[]}}class ${constructor(e){this.outputMotion=[],this.iLastTime=0,this.postMessageFn=e,window.addEventListener("devicemotion",this)}handleEvent(e){b(()=>this.check(e))}check(e){let{accelerationIncludingGravity:t,acceleration:n,rotationRate:i}=e;if(n&&n.x&&n.y&&n.z&&t&&t.x&&t.y&&t.z&&i&&i.alpha&&i.beta&&i.gamma){let r;let s=Date.now();this.iLastTime||(this.iLastTime=s,this.outputMotion=[String(s)]),r=0+(s-this.iLastTime),this.outputMotion.push([String(r),String(n.x.toFixed(2)),String(n.y.toFixed(2)),String(n.z.toFixed(2)),String(t.x.toFixed(2)),String(t.y.toFixed(2)),String(t.z.toFixed(2)),String(i.alpha.toFixed(2)),String(i.beta.toFixed(2)),String(i.gamma.toFixed(2))].join(",")),this.iLastTime=s,this.outputMotion.length>50&&this.sendMessage(e)}}sendMessage(e){this.postMessageFn("TMOTION",this.outputMotion.join("|"))&&(this.outputMotion=[],e&&e.target&&e.target.removeEventListener("devicemotion",this))}}class H{constructor(e){this.outputOrientation=[],this.iLastTime=0,this.sendMessageCounter=0,this.initialBatchOfData=!0,this.postMessageFn=e,window.addEventListener("deviceorientation",this,!0)}handleEvent(e){b(()=>this.check(e))}check(e){let{absolute:t,alpha:n,beta:i,gamma:r}=e;if(n&&i&&r){let s=Date.now();if(this.initialBatchOfData){if(this.iLastTime||(this.iLastTime=s),this.outputOrientation.push([String(s),String(t),String(n.toFixed(2)),String(i.toFixed(2)),String(r.toFixed(2))].join(",")),this.iLastTime=s,this.outputOrientation.length>200)try{this.sendMessage(e)}finally{this.initialBatchOfData=!1}}else s-this.iLastTime>=5e3&&(this.sendMessageCounter++,this.outputOrientation.push([[String(s)],String(t),String(n.toFixed(2)),String(i.toFixed(2)),String(r.toFixed(2))].join(",")),this.iLastTime=s,this.sendMessage(e))}}sendMessage(e){if(this.sendMessageCounter>30){e&&e.target&&e.target.removeEventListener("deviceorientation",this,!0);return}this.postMessageFn("TORIENT",this.outputOrientation.join("|"))&&(this.outputOrientation=[])}}class P{constructor(e){this.length=e,this.pointer=0,this.buffer=[]}flush(){let{buffer:e}=this;return this.pointer=0,this.buffer=[],e}isEmpty(){return 0===this.buffer.length}push(e){return this.buffer[this.pointer]=e,this.pointer=(this.pointer+1)%this.length,this.pointer}}class A{constructor(e,t){this.pointer_txy_buffer=new P(50),this.pointer_txy_samples=20,this.iframe=e,this.postMessageFn=t,window.addEventListener("mousemove",this,!0),N(()=>this.sendMessage)}check(e){let t=this.pointer_txy_buffer.push(`${Date.now()},${e.screenX}:${e.screenY}`);0==t&&(this.sendMessage(),this.pointer_txy_samples-=1,0==this.pointer_txy_samples&&window.removeEventListener("mousemove",this,!0))}sendMessage(){this.postMessageFn("TXY",this.pointer_txy_buffer.flush().reduce((e,t)=>`${e}|${t}`,""))}handleEvent(e){b(()=>this.check(e))}}class R{constructor(e){this.focusStates=["focus","blur"],this.postMessageFn=e,window.addEventListener("focus",this,!0),window.addEventListener("blur",this,!0)}check(e){e&&e.target===window&&e.type&&this.focusStates.includes(e.type.toLowerCase())&&this.sendMessage(e)}sendMessage(e){this.postMessageFn("TPAGEFOCUS",[Date.now(),String(e.type)].join("|"))}handleEvent(e){b(()=>this.check(e))}}class G{constructor(e){this.postMessageFn=e,document.addEventListener("visibilitychange",this,!0)}handleEvent(e){b(()=>this.check(e))}check(e){this.sendMessage(e)}sendMessage(e){this.postMessageFn("TFOCUS",[Date.now(),document.visibilityState].join("|"))}}class J{constructor(e){this.baseTime=0,this.lastEventTime=0,this.output=[],this.postMessageFn=e,document.addEventListener("focus",this,!0),document.addEventListener("blur",this,!0)}handleEvent(e){b(()=>this.check(e))}check(e){if(!(e.target instanceof Element))return;let t=C(e.target),n=Date.now();0==this.output.length&&(this.baseTime=n,this.output=[String(this.baseTime)],this.lastEventTime=this.baseTime);let i=n-this.lastEventTime;this.output.push([String(i),"focus"===e.type?"f":"b",t].join(",")),this.lastEventTime=n,"blur"===e.type&&this.sendMessage(e)}sendMessage(e){this.postMessageFn("TINPUTFOCUS",this.output.join("|")),this.output=[]}}var W={};W=function(e){var t=e;if(t&&t.id)return'//*[@id="'+t.id+'"]';for(var n=[];t&&Node.ELEMENT_NODE===t.nodeType;){for(var i=0,r=!1,s=t.previousSibling;s;)s.nodeType!==Node.DOCUMENT_TYPE_NODE&&s.nodeName===t.nodeName&&i++,s=s.previousSibling;for(s=t.nextSibling;s;){if(s.nodeName===t.nodeName){r=!0;break}s=s.nextSibling}n.push((t.prefix?t.prefix+":":"")+t.localName+(i||r?"["+(i+1)+"]":"")),t=t.parentNode}return n.length?"/"+n.reverse().join("/"):""};class B{constructor(e){this.pointer_txy_buffer=new P(20),this.pointer_txy_samples=20,this.postMessageFn=e,document.addEventListener("scroll",this,!0),N(()=>this.sendMessage)}handleEvent(e){b(()=>this.check(e))}check(e){let t,n;if(!(e instanceof Event))return;let{target:i}=e;if(i instanceof Document&&(i=i.documentElement),!(i instanceof HTMLElement))return;let r=s(W)(i),{scrollTop:o,scrollLeft:a}=i;i instanceof Document||(t=i.getAttribute("name")||void 0,n=i.id||void 0);let c=this.pointer_txy_buffer.push(JSON.stringify({time:Date.now(),xpath:r,name:t,id:n,scrollTop:o,scrollLeft:a}));if(0===c){if(0===this.pointer_txy_samples){document.removeEventListener("scroll",this,!0);return}this.sendMessage()}}sendMessage(){this.postMessageFn("TSCROLL",this.pointer_txy_buffer.flush().join("|")),this.pointer_txy_samples-=1}}class U{constructor(e){this.postMessageFn=e,window.addEventListener("click",this,!0),window.addEventListener("touchstart",this,!0)}handleEvent(e){b(()=>this.check(e))}check(e){let t;if(!e)return;let n=Date.now();if(e instanceof MouseEvent)t=e;else{if(!e.touches||!(e.touches.length>0))return;t=e.touches[0]}let{pageX:i,pageY:r,screenX:o,screenY:a,clientX:c,clientY:h,target:u}=t;if(u instanceof HTMLElement){let e=s(W)(u),{top:t,bottom:l,right:d,left:f}=this.getCoords(u),p=u.getAttribute("name")||"",g=u.id||"";this.outputClick={time:n,xpath:e,name:p,id:g,pageX:Number(i.toFixed(2)),pageY:Number(r.toFixed(2)),screenX:Number(o.toFixed(2)),screenY:Number(a.toFixed(2)),clientX:Number(c.toFixed(2)),clientY:Number(h.toFixed(2)),pageElementTop:Number(t.toFixed(2)),pageElementBottom:Number(l.toFixed(2)),pageElementLeft:Number(f.toFixed(2)),pageElementRight:Number(d.toFixed(2))},this.sendMessage()}}sendMessage(){this.postMessageFn("TCLICK",JSON.stringify(this.outputClick))}getCoords(e){let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset,left:t.left+window.pageXOffset}}}let Y=g("options"),X=["sandbox","development","production"],z=e=>X.includes(e),V={loaderInitTime:Date.now(),enableBiometrics:!0,onDeviceResponse:()=>Y.warn("No `onDeviceResponse` callback specified")};class q{constructor(e){let t=()=>{let t={};if(!window.performance)return;void 0===window.performance.toJSON?(performance.timing&&(t.timing=window.performance.timing),window.performance.timeOrigin&&(t.timeOrigin=window.performance.timeOrigin),window.performance.navigation&&(t.navigation=window.performance.navigation)):t=window.performance.toJSON();let n=JSON.stringify(t);"{}"!==n&&e("TLOAD",n)};"complete"===document.readyState?b(t):window.addEventListener("load",()=>{setTimeout(()=>{b(t)},0)},!0)}}async function Q(e,t,n,i){let r=encodeURIComponent,s=`${Z(e)}initiate?clientId=${r(t)}&correlationId=${r(n)}&msisdn=${r(i)}`,o=`${Z(e)}finalize?clientId=${r(t)}&correlationId=${r(n)}`,a=new Image;return new Promise((e,t)=>{a.onload=()=>(function(e,t,n){let i=new Image;i.onload=t,i.onerror=n,i.src=e})(o,e,t),a.onerror=t,a.src=s})}function Z(e){switch(e){case"sandbox":case"development":return"https://api.sandbox.bureau.id/v2/auth/";case"production":return"https://api.bureau.id/v2/auth/"}}class ee{constructor(e,t){this.portScanningCompleted=!1,this.ports=[7070,7071],"1b15facb-b4e0-4dd9-bd6c-c128ac66de0f"===t&&(this.ports=[7070,7071,7072,7073,5938,3389,8801,8802]),this.postMessageFn=e,this.sendTheMessage()}sendTheMessage(){b(async()=>{if(!this.portScanningCompleted){for(let e of this.ports)await ei("localhost",e,this.postMessageFn)?this.postMessageFn("TOPENPORTS",JSON.stringify(Array.of(e))):this.postMessageFn("TCLOSEDPORTS",JSON.stringify(Array.of(e)));this.portScanningCompleted=!0}})}}function et(e,t,n){return new Promise(i=>{let r;let s=performance.now(),o=Math.random().toString().replace("0.","").slice(0,7),a=new Image;n&&(r=setTimeout(()=>{a.src=""},700)),a.onerror=function(){n&&clearTimeout(r);let e=performance.now()-s;i(parseFloat(e.toFixed(3)))},a.src=`http://${e}:${t}/${o}.png`})}let en=[];async function ei(e,t,n){let i,r,s;let o=function(){let e=!1;if(navigator.userAgent){let t=navigator.userAgent.toLowerCase();(t.indexOf("win")>=0||t.indexOf("wow64")>=0)&&(e=!0)}return e}();o?(i=2,en=[]):i=30;let a=[];for(r=0;r<i;r++)en.length<i&&en.push(await et(e,37857,o)),a.push(await et(e,t,o));let c=e=>e.reduce((e,t)=>e+t),h=c(a),u=c(en);s=o?1.1*h<u:h>=1.3*u;let l=0;for(r=0;r<=i;r++)o?a[r]<en[r]&&l++:a[r]>en[r]&&l++;let d=l>=Math.floor(.8*i);return n("TPORTTIMINGS",JSON.stringify([Date.now(),t,a,en].join("|"))),s&&d}function er(){if(navigator.userAgent){let e=navigator.userAgent.toLowerCase();return e.indexOf("win")>=0||e.indexOf("wow64")>=0}return!1}class es{constructor(e){this.iLastTime=0,this.output=[],this.screenShotKeyMap={Meta:"Meta",Shift:"Shift",s:"s",S:"S"},this.recentKeys=[],this.keyCombination=[],this.iframe=e,this.output=[],document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0)}check(e){if(!(e.target instanceof Element))return;let t=e.type[3],n=C(e.target);if(!(e.key in this.screenShotKeyMap)||"u"===t&&!er()){this.recentKeys=[],this.keyCombination=[];return}this.recentKeys.push(e.key);let i=this.recentKeys.includes("Meta"),r=this.recentKeys.includes("Shift"),s=this.recentKeys.includes("s")||this.recentKeys.includes("S"),o=Date.now();0===this.output.length&&(this.iLastTime=o,this.output=[String(o)]);let a=o-this.iLastTime;this.keyCombination.push(e.key),this.keyCombination.push(t);let c=document.location.href;er()?i&&r&&s&&(this.output.push([String(a),this.keyCombination.join("+"),n,c].join(",")),this.recentKeys=[],this.keyCombination=[],this.sendMessage(e)):i&&r&&(this.output.push([String(a),this.keyCombination.join("+"),n,c].join(",")),this.recentKeys=[],this.keyCombination=[],this.sendMessage(e)),this.iLastTime=o}sendMessage(e){if(this.output.length>=1&&null!==e.target&&null!=this.iframe.contentWindow){let e=this.output.join("|");""!==e&&this.iframe.contentWindow.postMessage(JSON.stringify([["TSCREENSHOT",e]]),"*"),this.output=[],this.recentKeys=[],this.keyCombination=[]}}handleEvent(e){("keydown"===e.type||"keyup"===e.type)&&b(()=>this.check(e))}}class eo{constructor(e){this.startTimeMillis=Date.now(),this.startTracking=()=>{this.startTimeMillis=Date.now(),this.currentHref=document.location.href},this.postMessageFn=e,this.startTracking(),window.addEventListener("beforeunload",this,!0),N(()=>b(()=>this.sendMessage()))}check(e){e&&this.sendMessage()}sendMessage(){let e=Date.now()-this.startTimeMillis,t={page:this.currentHref,newPage:document.location.href,totalTime:e};this.postMessageFn("TPAGETIME",JSON.stringify(t)),this.startTracking()}handleEvent(e){b(()=>this.check(e))}}(o=h||(h={})).Unknown="unknown",o.Chromium="chromium",o.Gecko="gecko",o.Webkit="webkit",(a=u||(u={})).Unknown="unknown",a.Chrome="chrome",a.Firefox="firefox",a.Opera="opera",a.Safari="safari",a.IE="internet_explorer",a.WeChat="wechat";class ea{constructor(e){this.postMessageFn=e,window.addEventListener("load",this,!0)}check(e){e&&this.sendMessage(e)}sendMessage(e){this.postMessageFn("TPAGELOAD",function(){let e=function e(t){let n={};for(let i in t)if("enabledPlugin"!==i&&"function"!=typeof t[i]){if("object"==typeof t[i]){let r=e(t[i]);Object.keys(r)&&(n[i]=r)}else n[i]=t[i]}return n}(window.screen);return e.modified=Object.getOwnPropertyNames(window.screen),JSON.stringify(e)}()||""),e&&e.target&&e.target.removeEventListener("load",this,!0)}handleEvent(e){b(()=>this.check(e))}}let ec=g("loader"),eh={"616c9cea-4801-4503-bfd7-01b37167ee4f":!0,"da9e843a-f2c5-4de2-bf63-a31a45c2eac6":!0,"e149f2c5-4fce-4aef-98fd-90967c6aef5d":!0};class eu{constructor(e){this.deviceId=void 0,this.iframe=null,this.inputFocusHandler=null,this.keyboardHandler=null,this.screenshotHandler=null,this.onIframeLoaded=e=>{try{let t=(t,n)=>e.contentWindow?(e.contentWindow.postMessage(JSON.stringify([[t,n]]),"*"),!0):(ec.debug("iframe.contentWindow is null, not sending data"),!1);this.config.enablePortScanning&&new ee(t,this.config.clientId),new eo(t),new F(e),new A(e,t),new D(t),new K(t),new $(t),new H(t),new U(t),new q(t),new R(t),new G(t),new B(t),new ea(t),this.config.enableGeoLocation&&function(e){let t=g("geoLocation");navigator.geolocation.getCurrentPosition(t=>{if(!e||!e.contentWindow)return!1;let n=[String(t.timestamp),String(t.coords.latitude),String(t.coords.longitude),String(t.coords.accuracy)];e.contentWindow.postMessage(JSON.stringify([["TLOCATION",n.join(",")]]),"*")},()=>{t.error("Can not get Location")},{maximumAge:0,timeout:5e3,enableHighAccuracy:!0})}(e),this.inputFocusHandler=new J(t),this.keyboardHandler=new j(e),this.screenshotHandler=new es(e),this.isExperimentalBiometricsEnabled()}catch(e){E(e)}},this.onWindowMessage=e=>{let t;try{if(null==this.iframe){E(Error("CollectionContext.onWindowMessage called with null iframe."));return}if(this.iframeOrigin()!==e.origin){ec.debug(`message from different origin, ignoring message. expected ${this.iframeOrigin()}, message origin: ${e.origin}`);return}try{t=JSON.parse(e.data)}catch(t){t instanceof Error?ec.warn(`invalid message ${JSON.stringify(e.data)} ${t.name} ${t.message} ${t.stack}`):ec.warn(`invalid message ${JSON.stringify(e.data)} ${t}`);return}if(t.uuid!==this.config.uuid){ec.debug(`message for different iframe, ignoring message. id of this iframe ${this.config.uuid}, message target id: ${t.uuid}`);return}}catch(e){E(e);return}ec.debug("done"),this.deviceId!=t.deviceId&&(this.config.onDeviceResponse(t),ec.debug("onDeviceResponse"),this.deviceId=t.deviceId)},this.silentAuth=e=>{let t=this.silentAuthClientID(this.config.environment);return Q(this.config.environment,t,this.config.sessionKey,e)},this.silentAuthClientID=e=>({sandbox:"2f8c3735-e2f4-4bef-b128-adde6fd5a6db",development:"2f8c3735-e2f4-4bef-b128-adde6fd5a6db",production:"7e8f670d-d588-42c1-9e37-5f50ee049e28"})[e],this.config=e}bind(e=document.body){try{if(this.iframe){ec.error("Attempt to re-bind an alread-bound context");return}let{config:t}=this,n=document.createElement("iframe");n.width="0",n.height="0",n.style.background="transparent",n.style.border="0",n.style.position="fixed",n.src=this.iframeSrc(),t.enableBiometrics&&(n.onload=()=>this.onIframeLoaded(n)),t.enableGeoLocation&&(n.allow="geolocation"),window.addEventListener("message",this.onWindowMessage,!1),e.appendChild(n),this.iframe=n,t.fields&&this.trackCustomFields(t.fields||[])}catch(e){E(e)}}unbind(){try{this.iframe&&(this.iframe.remove(),window.removeEventListener("message",this.onWindowMessage,!1)),this.iframe=null,window._Sardine.defaultContext=void 0}catch(e){E(e)}}updateConfig(e){if(!this.iframe||!this.iframe.contentWindow)return ec.debug("updateConfig is called but iframe is not ready"),!1;e.fields&&(this.config.fields=e.fields,this.trackCustomFields(e.fields||[]));let t={...e};return t.fields=void 0,this.iframe.contentWindow.postMessage(JSON.stringify({type:"update_config",config:t}),"*"),!0}trackCustomFields(e){0!==e.length&&e.forEach(e=>{let{field:t}=e;if("vgs"===e.fieldType.toLowerCase()){let e=e=>{t.container&&(e.target=t.container,this.focusEvent(e))},n=e=>{t.container&&(e.target=t.container,this.keyboardEvent(e),this.screenshotEvent(e))};t.on("focus",e),t.on("blur",e),t.on("keyup",n),t.on("keydown",n),t.on("keypress",n)}})}focusEvent(e){this.inputFocusHandler&&this.inputFocusHandler.handleEvent(e)}keyboardEvent(e){this.keyboardHandler&&this.keyboardHandler.handleEvent(e)}screenshotEvent(e){this.screenshotHandler&&this.screenshotHandler.handleEvent(e)}iframeOrigin(){return d()?"http://localhost:1234":`https://${this.config.collectorDomain}`}iframeSrc(){let e=d()?"/collector.min.html":"/assets/collector.min.5539dfb.html",t=`${this.iframeOrigin()}${e}`,n=function(e){let t={...e};return delete t.fields,btoa(JSON.stringify(t))}(this.config);return`${t}?r=${l.version}#${n}`}isExperimentalBiometricsEnabled(){return this.config.clientId in eh}}function el(e){try{let t;let n={revision:l.version,origin:document.location.origin},i=e.environment||"production";if(e.parentElement=e.parentElement||document.body,e.customerId=e.customerId||e.userId,e.userIdHash&&e.customerId&&e.userIdHash!==e.customerId)return console.error("you cannot pass both userIdHash and customerId"),null;!e.userIdHash&&e.customerId&&(e.userIdHash=e.customerId);let r={collectorDomain:d()?"localhost:8080":"development"===i?"api.dev.sardine.ai":"sandbox"===i?"api.sandbox.sardine.ai":"api.sardine.ai",pixelURL:d()?"https://localhost:8443/v1/b.png":"development"===i?"https://p.dev.sardine.ai/v1/b.png":"sandbox"===i?"https://p.sandbox.sardine.ai/v1/b.png":"https://p.sardine.ai/v1/b.png",dBaseDomain:(t="",d()||"development"===i?t="dev.":"sandbox"===i&&(t="sandbox."),`d.${t}sardine.ai`)},s={location:window.location.href,referrer:document.referrer,uuid:I()},o=Object.assign({},V,n,r,s,e);if(!o.clientId)return console.error("`clientId` is a required property"),null;if(o.clientId=o.clientId.trim(),36!==o.clientId.length)return console.error(`invalid clientId: "${o.clientId}"`),null;if(!o.sessionKey)return console.error("`sessionKey` is a required property"),null;let a=new eu(o),{parentElement:c}=o;return window._Sardine.defaultContext&&(ec.warn("createContext was called twice without calling unbind"),window._Sardine.defaultContext.unbind()),window._Sardine.defaultContext=a,c&&(delete o.parentElement,a.bind(c)),a}catch(e){return console.error("error initializing sardine"),E(e),null}}let ed=["vgsFields","clientId","partnerId","sessionKey","parentSessionKey","flow","bm","environment","revision","location","userIdHash","customerId","enableGeoLocation","enablePortScanning"],ef=e=>"string"==typeof e[1];t="https://8b20cc14c69340c18e63355b0c67b05e@o438986.ingest.sentry.io/5405129",n=!1;let ep=g("loader");try{!function(){if(ep.debug("Initializing loader"),window._Sardine?ep.warn("loader.min.html is loaded twice"):window._Sardine={createContext:el,revision:l.version},window._sardine_revision=l.version,window._sardine){window._sardine.push(["revision",window._sardine_revision]),window._sardine.push(["location",window.location.href]);let e=function(e){for(let t of e)ed.includes(t[0])||E(Error(`unknown property is passed via old API: ${t[0]}`));let t={},n={};for(let i of e)ef(i)?n[i[0]]=i[1]:t[i[0]]=i[1];let i=n.environment,r=i&&z(i)?i:"production",s=t.vgsFields;return{loaderInitTime:Date.now(),clientId:n.clientId||function(e){throw Error(`Missing required config property "${e}"`)}("clientId"),partnerId:n.partnerId||"",sessionKey:n.sessionKey||"",parentSessionKey:n.parentSessionKey||"",flow:n.flow||"EMPTY",enableBiometrics:"off"!==n.bm,enableGeoLocation:"on"===n.enableGeoLocation,enablePortScanning:"on"===n.enablePortScanning,userIdHash:n.userIdHash,customerId:n.customerId,environment:r,fields:s&&"string"!=typeof s?s:[]}}(window._sardine);Object.assign(e,{onDeviceResponse:e=>void 0,parentElement:document.body}),window._Sardine.defaultContext=el(e)}}()}catch(e){E(e)}}();
//# source map is private: loader.min.js.map
